/**
 * 제품명 정규화 프롬프트
 *
 * 한국 화장품 제품명에서 증정품/프로모션 정보를 추출하여
 * 정규화된 형태로 변환하는 LLM 프롬프트
 */

export const normalizeProductPrompt = `
## 한국 화장품 제품명 처리 조건문:

**중요: 리필은 증정품으로 처리**
리필 관련 키워드("리필", "리필팩", "리필용기", "refill" 등)는 모두 "리필"이라는 증정품으로 통일하여 처리합니다.
리필 관련 키워드 앞의 모든 수식어(브랜드명, 제품명 등)는 제거하고 "리필"로만 표기합니다.

DEFINE
    1+1 프로모션 키워드: 2입, 2pack, *2, 2개묶음, 2EA, 듀오, 더블기획, 2개, X2
        - 위 키워드가 포함되면 1+1 프로모션으로 처리합니다.
        - 다음 키워드는 상품명이니 단품으로 인식하세요: 듀얼치크빔
DEFINE
    본품: 수식어를 제거한 상품명을 말함.
        - e.g. [NEW] 윙크 쿠션 매트 16g -> 윙크 쿠션 매트 N

DEFINE
    증정품: 본품과 함께 기획세트, 증정품을 말합니다.
        - e.g. [8월 올영픽/하트거울증정] 이니스프리 레티놀 시카 흔적 앰플 30ml 더블 기획 -> 하트거울

**우선순위 1: "+" 구분자로 연결된 제품 세트 처리**
IF 제품명에 "+" 기호가 있는 경우:
    각 제품을 개별적으로 파싱하여 처리하세요
    각 제품에서 브랜드명, 캐릭터명, 수식어, 괄호를 꼭 제거하세요!
    최종 결과는 "제품1 + 제품2 + ..." 형식으로 구성하세요
    예: "얼티밋 화이트 쿠션+스누피 프라이머+스누피 픽서" → "얼티밋 화이트 쿠션 + 프라이머 + 픽서"

**우선순위 2: N종 묶음 제품 처리**
IF 제품명에 "N종" 형태 패턴(예: "4종", "7종", "3종키트", "2종세트" 등)이 있는 경우:
    normalizeProductName: "구성품1 + 구성품2 + ..." 형식으로 구성하세요.
        - e.g. (토너150ml+크림125ml) -> 토너 + 크림
    gifts: 괄호 안의 개별 구성품들을 파싱하여 각각을 배열에 추가하세요

**우선순위 3: 브랜드명 및 캐릭터명 제거**
IF 제품명에 브랜드명이 있는 경우:
    브랜드명을 제거하세요 (예: 이니스프리, 아이오페, 라네즈, 설화수, 헤라, 아모레퍼시픽, 에뛰드하우스, 미샤, 더페이스샵, 토니앤가이, 휩드, 메디힐, 롬앤 등)

IF 제품명에 캐릭터명이나 콜라보명이 있는 경우:
    캐릭터명을 제거하세요 (예: 스누피, 헬로키티, 라이언, 카카오프렌즈, 포켓몬, 디즈니, 마블, 콜라보, 리미티드, 에디션 등)
    캐릭터명이 제품명 앞에 붙은 경우 완전히 제거하세요
    예: "스누피 프라이머" → "프라이머"
    예: "헬로키티 쿠션" → "쿠션"

ELSE:
    원본 텍스트를 유지하세요

IF 제품명에 수식어가 있는 경우:
    수식어를 제거하세요 (예: [NEW], [신상품], [한정판], [SALE], [특가], [이벤트], [리뉴얼], [개선], [업그레이드] 등)
ELSE:
    수식어 제거 없이 계속하세요

IF 제품명에 용량 정보(숫자+단위)가 포함된 경우:
    **중요: "25+25ml" 같은 경우 연산하지 말고 첫 번째 숫자(25)만 추출하세요**
    volume에 첫 번째 숫자만 추출하세요 (단위 제외, 연산 금지)
    IF 단위가 g, ml, L, kg 등 부피/무게 단위인 경우:
        volumeUnit에 해당 단위를 추출하세요
    ELSE IF 단위가 개, 매, 장, 팩, 개입 등 개수 단위인 경우:
        volumeUnit을 "ea"로 설정하세요
    ELSE IF 용량/단위로 측정할 수 없는 제품인 경우:
        volumeUnit을 "ea"로 설정하세요
    ELSE:
        volumeUnit에 발견된 단위를 그대로 사용하세요
ELSE:
    volumeUnit에 발견된 단위가 없다면, "ea" 로 설정해주세요.
    volume을 1로 설정해주세요.

IF 1+1 프로모션 기획상품의 경우:
    - gifts 배열에 본품의 정보를 다른 증정품과 함께 꼭 추가합니다.
       - itemVolume을 본품의 volume으로 설정합니다.
       - itemVolumeUnit을 본품의 volumeUnit으로 설정합니다.
    - 정규화된 이름 끝에 " 1+1"을 추가하고 "더블기획" 키워드를 제거하세요, 다른 증정과 중복될 될 수 있습니다.
       - 결과예시 > 1+1 + 증정품명
ELSE:
    일반 제품으로 처리하세요

IF 제품명에 리필 관련 키워드가 있는 경우:
    normalizeProductName을 리필을 추가하세요.
    gifts 배열에 리필 정보를 추가하세요.
    itemName을 리필로 설정하세요.

    IF 리필관련 용량 정보가 있다면:
        itemVolume을 리필관련 용량 정보로 설정하세요.
        itemVolumeUnit을 리필관련 용량 정보의 단위로 설정하세요.
    ELSE:
        itemVolume을 1로 설정하세요.
        itemVolumeUnit을 "ea"로 설정하세요.

IF 제품명에 증정품 표시("[증정]", "증정품", "사은품", "[이벤트/제품증정]" 패턴)가 있는 경우:
    For each 증정품:
        증정품명과 용량을 추출하여 gifts 배열에 추가하세요
        IF 증정품이 리필 관련("리필", "리필팩", "리필용기", "refill" 등)인 경우:
            itemName을 "리필"로 통일하세요 (모든 수식어 제거)
        ELSE IF 증정품이 거울, 파우치, 케이스, 쿠션퍼프, 브러시, 헤어밴드, 스티커, 엽서, 포토카드 등 액세서리인 경우:
            itemName에서 모든 수식어를 제거하세요
            itemVolume을 1로, itemVolumeUnit을 "ea"로 설정하세요 (측정 불가능한 액세서리)
        ELSE IF 증정품에 용량 정보가 있는 경우:
            일반 용량 추출 규칙을 적용하여 itemVolume과 itemVolumeUnit을 설정하세요
        ELSE:
            itemVolume을 null로, itemVolumeUnit을 ""로 설정하세요

    normalizeProductName을 "증정품1 + 증정품2 + ..." 형식으로 구성하세요 (본품 제외)
    마지막에 "+" 기호가 오지 않도록 하세요

**우선순위 3: 단순 증정품 처리**
IF 제품명이 단순한 증정품 형태인 경우(예: "크림 미니", "토너 30ml", "픽서 스프레이" 등):
    normalizeProductName을 해당 증정품명으로 설정하세요
    예: "크림 미니" → "크림 미니"

IF 위 모든 처리가 실패하는 경우:
    원본 제품명을 normalizeProductName으로 사용하세요

## 예시

**Input:** "휩드(WHIPPED) [여행용 팩스크럽 25g 증정] 휩드 비건 팩클렌저 대용량 130g (5종 택1)"
**Output:** {
  "normalizeProductName": "비건 팩클렌저 대용량 + 여행용 팩스크럽",
  "volume": 130,
  "volumeUnit": "g",
  "gifts": [{"itemName": "여행용 팩스크럽", "itemVolume": 25, "itemVolumeUnit": "g"}]
}

**Input:** "얼티밋 화이트 쿠션+스누피 프라이머+스누피 픽서 100ml"
**Output:** {
  "normalizeProductName": "프라이머 + 픽서",
  "volume": 100,
  "volumeUnit": "ml",
  "gifts": [
    {"itemName": "프라이머", "itemVolume": 1, "itemVolumeUnit": "ea"},
    {"itemName": "픽서", "itemVolume": 100, "itemVolumeUnit": "ml"}
  ]
}

## 중요 규칙 재강조:
- **용량 연산 절대 금지**: "25ml+25ml" → volume: 25 (50이 아님)
- **첫 번째 숫자만 추출**: 여러 숫자가 있어도 첫 번째만 사용
- **캐릭터명 완전 제거**: "스누피 프라이머" → "프라이머", "헬로키티 쿠션" → "쿠션"
- **N종 묶음 제품 처리**: 괄호 안에 여러 제품이 나열된 경우 "콜라보 세트" 또는 "묶음 세트"로 명명
- **리필 수식어 제거**: "윌크 리필", "브랜드 리필" → "리필"

## JSON 출력 형식:
\`\`\`
{
  "normalizeProductName": "처리된_제품명",
  "volume": 숫자_또는_null,
  "volumeUnit": "단위_또는_빈문자열",
  "gifts": [{"itemName": "증정품명", "itemVolume": 숫자_또는_null, "itemVolumeUnit": "단위_또는_빈문자열"}]
}
\`\`\`
`;
