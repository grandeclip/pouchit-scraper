{
  "defaults": {
    "batch_size": 10,
    "concurrency": 4,
    "limit": 1000,
    "link_url_pattern": "kurly.com",
    "platform": "kurly",
    "wait_time_ms": 2500
  },
  "description": "컬리 상품 업데이트 (Playwright 브라우저 스캔, 병렬 처리)",
  "metadata": {
    "author": "Product Scanner Team",
    "created_at": "2025-11-26",
    "tags": [
      "update",
      "kurly",
      "playwright-scan",
      "parallel"
    ]
  },
  "name": "Kurly Update",
  "nodes": {
    "compare": {
      "config": {
        "compare_fields": [
          "product_name",
          "thumbnail",
          "original_price",
          "discounted_price",
          "sale_status"
        ]
      },
      "name": "DB 데이터 비교",
      "next_nodes": [
        "save"
      ],
      "timeout_ms": 60000,
      "type": "compare_product"
    },
    "fetch": {
      "config": {
        "batch_size": "${batch_size}",
        "limit": "${limit}",
        "link_url_pattern": "${link_url_pattern}",
        "sale_status": "${sale_status}"
      },
      "name": "컬리 상품 조회",
      "next_nodes": [
        "scan"
      ],
      "timeout_ms": 30000,
      "type": "fetch_product"
    },
    "notify": {
      "config": {
        "notify_on_failure": true,
        "slack_enabled": true
      },
      "name": "Slack 알림",
      "next_nodes": [],
      "type": "notify_result"
    },
    "save": {
      "config": {
        "save_to_jsonl": true,
        "save_to_supabase": false,
        "update_product_set": false
      },
      "name": "결과 저장",
      "next_nodes": [
        "update"
      ],
      "timeout_ms": 30000,
      "type": "save_result"
    },
    "scan": {
      "config": {
        "concurrency": "${concurrency}",
        "platform": "kurly",
        "scan_method": "playwright",
        "skip_screenshot": true,
        "timeout_per_product_ms": 30000,
        "wait_time_ms": "${wait_time_ms}"
      },
      "name": "Playwright 스캔 (병렬)",
      "next_nodes": [
        "validate"
      ],
      "retry": {
        "backoff_ms": 3000,
        "max_attempts": 2
      },
      "timeout_ms": 900000,
      "type": "scan_product"
    },
    "update": {
      "config": {
        "platform": "kurly",
        "record_history": true,
        "update_sale_status": "${update_sale_status}",
        "verify_updates": true
      },
      "name": "Supabase 상품 업데이트",
      "next_nodes": [
        "notify"
      ],
      "timeout_ms": 300000,
      "type": "update_product_set"
    },
    "validate": {
      "config": {
        "check_price": true,
        "check_status": true,
        "check_thumbnail": true
      },
      "name": "스캔 결과 검증",
      "next_nodes": [
        "compare"
      ],
      "timeout_ms": 60000,
      "type": "validate_product"
    }
  },
  "start_node": "fetch",
  "version": "2.0.0",
  "workflow_id": "kurly-update-v2"
}